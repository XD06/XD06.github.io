---
title: 计算机网络-数据链路(四)9-2
date: 2022-09-02
tags: 网络
comments: true
top: 
mathjax: true
copyright: true
categories: 机网
---

# CSMA/CD协议

##  CSMA/CD协议的基本原理

* 在以太网发展初期，将多个站点连接到一条总线上来构建共享总线以太网。
* 共享以太网具有天然的广播特性，即使是总线上某个站点给另一个站点发送单播帧，表示帧的信号也会沿着总线传播到总线上其他站点。在某一站点发送帧时，总线资源会被其独占，这时其他站点也发送帧，会出现信号碰撞。

<!--more-->

* 为了解决上述的问题，共享以太网使用了一种专用的协议CSMA/CD，它是载波监听多址接入/碰撞检测（Carrier Sense Multiple Access Collision Detection）的英文缩写。

  {% asset_img 1.png This is an image %}

* 发送帧的站点一旦检测碰撞，除了立即停止发送帧外，还要继续发送32比特或48比特的人为干扰信号，保证有足够多的碰撞信号使所有站点都能检测出的碰撞。
* 载波监听检测到总线空闲，但总线不一定空闲。
* 在使用CSMA/CD协议时，由于正在发送帧的站点必须“边发送帧，边检测碰撞”，因此站点不能同时发送和接收。也就是不可能进行全双工通信，二只能进行半双工通信（双向交替通信）。

##  共享是以太网的争用期

* 站点从发送帧开始，最多经过时长2τ（即δ趋近于0）就可检测所发送的帧是否遭遇了碰撞。
* 因此，共享总线以太网的端到端往返的时间2τ被称为争用期，或者碰撞窗口。
  * 站点从发送帧开始，经过争用期2τ这段时间还没有检测到碰撞，就可以肯定这次发送不会发生碰撞。

* 总线的长度越长（单端到端的传播时延越大），网络中的站点数量越多，发生碰撞的概率就越大。
* 10Mb/s共享是以太网（传统的以太网）规定：争用期2τ的值为512比特的发送时间，即51.2μs。

{% asset_img 2.png This is an image %}
$$
争用期：2τ=\dfrac{512b}{10Mb/s}=\dfrac{512b}{10\times10^6b/s}=51.2μs
$$

$$
单程端到端传播时延τ=\dfrac{51.2μs}{2}=25.6μs
$$

$$
假设信号的传播速率为2\times10^8m/s
$$

$$
则总线的长度为2\times10^8m/s \times25.6μs=5120m
$$



{% asset_img 3.png This is an image %}

##  共享式以太网的最小帧长和最大帧长

* 为了确保共享式以太网上每一个站点再发送完一个完整的帧之前，能够检测出是否发生了碰撞，帧的发送时延就不能少于共享总线以太网到端的往返时间，即一个争用期2τ.

* 对于10Mb/s的共享式以太网，其争用期为51.2μs，最小帧长为512b，即64B
  * 当某个站点发送帧时，如果帧的前64B没有遭遇碰撞，那么后续的部分也就不会遭遇碰撞，如果遭遇碰撞一定是在帧的前64B知内。所以当接收站点接收到长度小于64B的帧，就可以判定这是一个遭遇了碰撞而异常中止的无效帧。

{% asset_img 4.png This is an image %}

例题：

{% asset_img 5.png This is an image %}

##  共享式以太网的退避算法

* 使用CSMA/CD协议的共享总线以太网中，一边发送帧的站点还要一边检测碰撞，检测到后，会立即停止发送。退避一段时间后重新发送，在此协议的共享以太网各站点采用截断二进制指数退避（Truncated Binary Exponential Backoff）算法来选择退避的随机时间。

  {% asset_img 6.png This is an image %}

* 上述的算法可使重传的需要推迟的平均时间随重传次数而增大（即动态退避），来减少产生碰撞的概率。重传16次不成功时，就放弃重传并向高层报告。

## 共享式以太网的信道利用率

{% asset_img 7.png This is an image %}
$$
极限信道利用率 S_{max}=\dfrac{T_0}{T_0+τ}=\dfrac{1}{1+\dfrac{τ}{T_0}}=\dfrac{1}{1+a}参数a的值应尽量小，以提高信道利用率
$$

$$
a=\dfrac{τ}{T_0}  共享式以太网端到端的距离不应太长
$$

例题：

{% asset_img 8.png This is an image %}

##  使用集线器的共享式以太网

* 早期的以太网是使用出同轴电缆的共享式以太网，实践证明使用无源电缆线和大量机械接口的总线型以太网并不像人们想象的那么可靠。

  {% asset_img 9.png This is an image %}

  {% asset_img 10.png This is an image %}

例题：

【2019年题34】100BaseT快速以太网的导向传输介质是（）

A.双绞线 &nbsp;&nbsp;&nbsp;B.单模光纤&nbsp;&nbsp;&nbsp;C.多模光纤&nbsp;&nbsp;&nbsp;D.同轴电缆



## 注：（以上内容来自[中国MOOC慕课湖南科技大学计算机网络](https://www.icourse163.org/learn/HNKJ-1461816178?tid=1468294445#/learn/announce))













