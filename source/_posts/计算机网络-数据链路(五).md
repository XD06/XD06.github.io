---
title: 计算机网络-数据链路(五)9-3
date: 2022-09-03
tags: 网络
comments: true
top: 
copyright: true
categories: 机网
---
{% note orange 'fas fa-bullhorn' flat %}注意：你可以点击右下角设置，选择合适的背景和字体方便阅读.<br>{% endnote %}

#  在物理层扩展以太网

##  扩展站点与集线器之间的距离

* 共享式以太网中两站点之间不能太远，不然信号会衰减到CSMA/CD协议无法正常工作。早期使用粗同轴电缆或细同轴电缆共享总线以太网时，为了提高网络的地理位置覆盖范围，常用的是工作在物理层的转换器。
* 在IEEE 802.3标准规定，两个网段可用同一个转发器连接起来，任意两个站点之间最多可以经过三个网段。
<!--more-->
* 使用双绞线和集线器的10BASE-T星型（以太网中的每个站点到集线器的距离不能超过100m，两站点之间的通信距离最大不能超过200m）成为以太网的主流类型，转发器就大大减少了。
* 在10BASE-T星型的以太网中，可使用光纤和一对光纤调制解调器来扩展站点与集线器之间的距离。


##  扩展共享式以太网的覆盖范围和站点数量

{% asset_img 1.png This is an image %}

* 在物理层扩展的共享式以太网仍然是一个碰撞域，不能连接太多的站点，否则可能会出现大量的碰撞，导致平均吞吐量太低。

##  使用网桥在数据链路层扩展的以太网

* 网桥工作在数据链路层（包含其下的物理层），而集线器仅工作在物理层。
  * 网桥可以识别帧的结构
  * 网桥可以根据帧首部中的目的MAC地址和网桥自身的帧发表来转发或丢弃所接收的帧。

##  网桥的主要结构和基本工作原理

{% asset_img 2.png This is an image %}

* 转发表是网桥转发帧的依据，记录着各主机的MAC地址和自己端口对应关系，网桥根据各主机的MAC地址来查找转发表，来选择是接收或丢弃帧 
* 广播帧（目的MAC为FF-FF-FF-FF-FF-FF），网桥接收该广播帧，不用查找转发表，而是通过除接受该帧的接口的其他接口转发该广播帧。
* 网桥的接口在向其连接的网段转发帧时，会执行相应的媒体接入控制协议，对于共享式以太网就是CSMA/CD协议。

## 透明网桥的自学习和转发帧的流程

{% asset_img 3.png This is an image %}

{% asset_img 4.png This is an image %}

* 网桥收到帧之后进行登记（自学习），登记的内容为帧的源MAC地址和进入网桥的接口号。
* 网桥根据帧的目的MAC地址和网桥的转发表对帧进行转发，有三种情况：
  1. 明确转发：网桥知道应当从哪个接口转发帧。
  2. 盲目转发： 网桥不知道从哪个接口转发帧，只能通过通过除接受该帧的接口的其他所有接口转发该帧。
  3. 丢弃：网桥知道不应该转发该帧，直接将其丢弃。

**注意：**{% asset_img 5.png This is an image %}

##  透明网桥的生成协议STP

* 为了提高以太网的可靠性，有时需要在两个以太网之间使用多个透明网桥来提供冗余链路。

{% asset_img 6.png This is an image %}

* 为了避免这种情况，透明网桥使用生成树协议（Spanning Tree Protocol，STP），增加冗余链路提高网络可靠性。
  * 网桥之间通过交互网桥协议单元（Bridge Protocol Data Unit，BPDU），找出原网络拓扑的一个接通子集（生成树）。

##  交换式以太网

* 网桥的接口数量很少，通常只有2-4各，一般只用连接不同的网段。
* 1990年面世的交换式集线器（Switching Hub），实质上是具有多个接口的网桥，常称为以太网交换机或二层交换机
  * “二层”是指以太网交换机工作在数据链路层（包括物理层）
  * 和网桥相同，交换机内部的转发表也是通过子学习算法，基于网络中各主机的通信，自动的逐步的建立。
  * 交换机也使用生成树协议STP，来产生能够连通全网的但不产生环路的通信路径。
* 使用交换机（而不使用集线器）的以太网就是交换式以太网。

##  以太网交换机

* 交换机的每个接口可以连接计算机，也可以连接集线器或另一个交换机。

  * 它接口当与计算机或交换机连接时，可以工作在全双工方式，可以连接多对接口，无碰撞传输数据，不用使用CSMA/CD协议。
  * 当它的接口连接的是集线器时，该接口就只能使用CSMA/CD协议并只能工作在半双工方式。现在的网卡和交换机都能自动识别上述两种情况，自动切换相应的工作方式。

  交换机的速率接口多种，又10Mbps到10Gbps不等，大部分接口支持多速率自适应。

{% asset_img 7.png This is an image %}

**例题：**

【2009年题36】以太网交换机进行转发决策时使用的PDU地址是（A）

A.目的物理地址&nbsp;&nbsp;B.目的IP地址&nbsp;&nbsp;C.源物理地址&nbsp;&nbsp;D.源IP地址

解析：PDU（Protocol Data Unit）的意思是协议数据单元，它是计算机网络体系中对等实体间逻辑通信对象。

MAC地址又称为硬件地址或物理地址。请注意：不要被“物理“二字误导认为物理地址属于物理层范畴，物理地址属于数据链路层范畴。

* 一般交换机都采用”存储转发“方式，为减小交换机的转发延迟，某些交换机采用了直通（Cut-Through）交换方式。

* 采用直通交换方式的交换机，在接受帧的同时就立即转发，不必缓存。
* 直通交换的时延非常小
* 直通交换不检查差错直接发送，可能将一些无效的帧发给其他的主机。

{% asset_img 8.png This is an image %}



## 注：（以上内容来自[中国MOOC慕课湖南科技大学计算机网络](https://www.icourse163.org/learn/HNKJ-1461816178?tid=1468294445#/learn/announce))













